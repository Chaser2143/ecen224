<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">

<title>
    
    Client â€¢ ECEn 224: Intro to Computer Systems
    
</title>

<!-- Bootstrap core CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

<!-- Custom styles for this template -->
<link rel="stylesheet" href=/ecen224/css/main.css>

<!-- <link href="https://fonts.googleapis.com/css?family=Ubuntu&display=swap" rel="stylesheet"> -->
<!-- <link href="https://fonts.googleapis.com/css2?family=Ubuntu+Mono&display=swap" rel="stylesheet"> -->
<link rel="stylesheet" href="https://use.typekit.net/jcn6ybb.css">

<link rel="icon" type="image/png" sizes="96x96" href=/ecen224/icon/favicon-96x96.png>
<link rel="icon" type="image/png" sizes="32x32" href=/ecen224/icon/favicon-32x32.png>
<link rel="icon" type="image/png" sizes="16x16" href=/ecen224/icon/favicon-16x16.png>

<script src="https://kit.fontawesome.com/624d595ebf.js" crossorigin="anonymous"></script>


</head>

<body>
  <div class="d-flex" id="wrapper">
    <!-- Sidebar -->
<div class="border-right" id="sidebar-wrapper">
    <div class="sidebar-sticky">
        <div class="sidebar-heading-big">
            <a href="/ecen224/"><img src="/ecen224/icon/icon.svg">
                ECEn 224</a>
        </div>

        <div class="list-group list-group-flush">
            
            <!-- Look for specific front-matter tag -->
            
            <a href="/ecen224/overview/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-chalkboard-teacher"></i>
                
                Overview
            </a>
            
            
            <!-- Look for specific front-matter tag -->
            
            <a href="/ecen224/resources/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-book"></i>
                
                Resources
            </a>
            
            
            <!-- Look for specific front-matter tag -->
            
            <a href="/ecen224/coding-standard/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-terminal"></i>
                
                Coding Standard
            </a>
            
            
            <!-- Look for specific front-matter tag -->
            
            <a href="/ecen224/lab-setup/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-wrench"></i>
                
                Lab Setup
            </a>
            
            
            <!-- Look for specific front-matter tag -->
            
            <a href="https://learningsuite.byu.edu/.N7cA/cid-qWPtDGbD9Vq6/calendar" class="list-group-item list-group-item-action sidebar-item" target="_blank" rel="noopener noreferrer">
                
                <i class="fa-duotone fa-calendar"></i>
                
                Schedule
            </a>
            
            
        </div>

        <div class="sidebar-heading">Labs</div>
        <div class="list-group list-group-flush">
            
            <a href="/ecen224/labs/getting-started/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">1</span>
                Getting Started
            </a>
            
            <a href="/ecen224/labs/command-line/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">2</span>
                Command Line
            </a>
            
            <a href="/ecen224/labs/data/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">3</span>
                Data
            </a>
            
            <a href="/ecen224/labs/image/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">4</span>
                Image
            </a>
            
            <a href="/ecen224/labs/debugging/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">5</span>
                Debugging
            </a>
            
            <a href="/ecen224/labs/display/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">6</span>
                Display
            </a>
            
            <a href="/ecen224/labs/io/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">7</span>
                I/O
            </a>
            
            <a href="/ecen224/labs/camera/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">8</span>
                Camera
            </a>
            
            <a href="/ecen224/labs/client/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">9</span>
                Client
            </a>
            
            <a href="/ecen224/labs/threaded-client/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">10</span>
                Threaded Client
            </a>
            
            <a href="/ecen224/labs/doorbell/" class="list-group-item list-group-item-action sidebar-item">
                <span class="badge badge-pill badge-dark-grey">11</span>
                Doorbell
            </a>
            
        </div>

        <div class="sidebar-heading">Programming Assignments</div>
        <div class="list-group list-group-flush">
            
            <a href="/ecen224/programming-assignments/bomb-lab/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-bomb"></i>
                
                Bomb Lab
            </a>
            
            <a href="/ecen224/programming-assignments/attack-lab/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-bow-arrow"></i>
                
                Attack Lab
            </a>
            
        </div>

        <div class="sidebar-heading">Homeworks</div>
        <div class="list-group list-group-flush">
            
            <a href="/ecen224/homework/data/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-binary"></i>
                
                Data
            </a>
            
            <a href="/ecen224/homework/c/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-brackets-curly"></i>
                
                C
            </a>
            
            <a href="/ecen224/homework/assembly/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-microchip"></i>
                
                Assembly
            </a>
            
            <a href="/ecen224/homework/memory/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-memory"></i>
                
                Memory
            </a>
            
            <a href="/ecen224/homework/io/" class="list-group-item list-group-item-action sidebar-item">
                
                <i class="fa-duotone fa-server"></i>
                
                I/O
            </a>
            
        </div>
    </div>
</div>
<!-- /#sidebar-wrapper -->


    <!-- Page Content -->
    <div id="page-content-wrapper">

      <nav class="navbar sticky-top navbar-expand-lg border-bottom">
    <button class="btn btn-brand" id="menu-toggle">
        <i class="fas fa-bars"></i>
    </button>

    <a href="#" class="navbar-brand mb-0 h1 page-title-bar text-center mx-auto" id="page-title-bar"></a>

    
    <ul class="navbar-nav">
        <li class="nav-item">
            <a class="nav-link btn btn-brand suggest-edits" target="_blank" rel="noopener noreferrer" href="https://github.com/byu-cpe/ecen224/issues/new?title=Suggestions+for+Client+Page"><i class="fab fa-github"></i> Suggest
                Edits</a>
        </li>
    </ul>
    
</nav>


      <div class="container">
        <article class="page lab">
    <h1 class="page-title" id="page-title">
        Client
    </h1>

    <div class="page-content">
        
        <div class="lab-toc col-md-6 col-lg-5">
            <h4>Table of Contents</h4>
            <ul>
  <li><a href="#github-classroom">GitHub Classroom</a></li>
  <li><a href="#objectives">Objectives</a></li>
  <li>
<a href="#overview">Overview</a>
    <ul>
      <li>
<a href="#config-struct">Config Struct</a>
        <ul>
          <li><a href="#ip-addresses-and-ports">IP Addresses and Ports</a></li>
          <li><a href="#struct-data-members">Struct Data Members</a></li>
        </ul>
      </li>
      <li><a href="#network-socket">Network Socket</a></li>
      <li><a href="#sending-data">Sending Data</a></li>
      <li><a href="#freeing-memory">Freeing Memory</a></li>
    </ul>
  </li>
  <li><a href="#requirements">Requirements</a></li>
  <li>
<a href="#submission">Submission</a>
    <ul>
      <li><a href="#compilation">Compilation</a></li>
      <li><a href="#gitignore">Gitignore</a></li>
      <li><a href="#normal-stuff">Normal Stuff</a></li>
    </ul>
  </li>
  <li><a href="#explore-more">Explore More!</a></li>
</ul>

        </div>
        

        <h2 id="github-classroom">GitHub Classroom</h2>
<p>Use the GitHub Classroom link posted in the Slack channel for the lab to accept the assignment.</p>

<h2 id="objectives">Objectives</h2>

<ul>
  <li>Interact with <code class="language-plaintext highlighter-rouge">struct</code>s</li>
  <li>Handle raw data in a buffer</li>
  <li>Send data over a network socket</li>
</ul>

<h2 id="overview">Overview</h2>
<p>You have come very far in understanding how to control your computer! Up until this point, we have covered programming peripheral devices, handling inputs from a user, and many other skills that allow you to control your Pi Z2W to the fullest! In this we will take you from influencing processes on your own system to interacting with programs on other systems!</p>

<p>In this lab you will be sending some of your saved photos</p>

<h3 id="config-struct">Config Struct</h3>

<h4 id="ip-addresses-and-ports">IP Addresses and Ports</h4>
<p>Before we can access a program on a different computer, we need to know where that computer lives. In order to know where that computer lives, we need to know that computerâ€™s address. For example, when you are on your web browser and you want to visit <a href="https://byu.edu" target="_blank" rel="noopener noreferrer">https://byu.edu</a>, the browser will use a special protocol to extract the <strong>IP address</strong> from the <strong>domain name</strong> that you provided in the URL bar.</p>

<p>If you want to find an IP address of a certain website (most popular ones have many), you can use <code class="language-plaintext highlighter-rouge">ping</code> and observe the output:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ping byu.edu

PING byu.edu (128.187.16.184) 56(84) bytes of data.
64 bytes from byu.com (128.187.16.184): icmp_seq=1 ttl=58 time=2.53 ms
64 bytes from email.byu.edu (128.187.16.184): icmp_seq=2 ttl=58 time=2.92 ms
64 bytes from email.byu.edu (128.187.16.184): icmp_seq=3 ttl=58 time=11.1 ms

</code></pre></div></div>

<p>Note that <code class="language-plaintext highlighter-rouge">128.187.16.184</code> is the IP address of the server that responded to our <code class="language-plaintext highlighter-rouge">ping</code>.</p>

<p>Now that we know the address of the computer that we want to talk to, we need to know where on that computer the program that we are trying to interact with is happening. Programs that communicate on the remote computer through a special window called a <strong>port</strong>. For example, web server that is hosting a website normally does this under port <code class="language-plaintext highlighter-rouge">80</code> or <code class="language-plaintext highlighter-rouge">443</code> (if you are using HTTPS instead of HTTP). Every time you use <code class="language-plaintext highlighter-rouge">ssh</code> on your computer, you are talking to the remote computer over port <code class="language-plaintext highlighter-rouge">22</code> by default.</p>

<h4 id="struct-data-members">Struct Data Members</h4>
<p>In order to talk to a remote computer running a program that we want to interact with (or a <strong>server</strong>), we need to know several things about it. For this lab, the <code class="language-plaintext highlighter-rouge">Config</code> <code class="language-plaintext highlighter-rouge">struct</code> in <code class="language-plaintext highlighter-rouge">client.h</code> contains the information you will need in order to connect to the server:</p>

<div class="language-c highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">typedef</span> <span class="k">struct</span> <span class="n">Config</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">port</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">host</span><span class="p">;</span>
    <span class="kt">uint8_t</span> <span class="o">*</span><span class="n">payload</span><span class="p">;</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">hw_id</span><span class="p">;</span>
<span class="p">}</span> <span class="n">Config</span><span class="p">;</span>
</code></pre></div></div>

<table>
  <thead>
    <tr>
      <th>Data Member</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">port</code></td>
      <td>The location of photo uploader program is running</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">host</code></td>
      <td>This is the hostname of the server we are trying to connect to</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">payload</code></td>
      <td>This is the data we want to send to the server. In this lab, that will be the image data.</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">hw_id</code></td>
      <td>This is your Learning Suite assigned homework ID for this class. In order to find your unique homework ID, go to Learning Suite &gt;</td>
    </tr>
    <tr>
      <td>this course &gt; Grades &gt; And then click on the small link at the top that says <code class="language-plaintext highlighter-rouge">Show Course Homework ID</code>
</td>
      <td>Â </td>
    </tr>
  </tbody>
</table>

<p>The location you will be connecting to to upload your photos in this lab will be:</p>
<ul>
  <li>Host: netlab.et.byu.edu</li>
  <li>Port: 2225</li>
</ul>

<h3 id="network-socket">Network Socket</h3>
<p>Now that we know where to go to talk to a different computer/server in our program, how do we go about doing that? The answer is quite simple and more surprising than you would think. Talking to a different computer in C is much like writing or reading data to a file. However, instead of writing to a file, we will be writing to a socket.</p>

<p>When we want to write to a file in C, we need to use the function <code class="language-plaintext highlighter-rouge">fopen()</code> to create or open the file that we want to read from or edit. In network programming, it is not this simple and actually requires a bit of investigating. However, for this lab, you will not be expected to create a network socket by yourself. The function <code class="language-plaintext highlighter-rouge">client_connect()</code> has been written for you to do this. However, just like a <code class="language-plaintext highlighter-rouge">fopen()</code> returns a <code class="language-plaintext highlighter-rouge">FILE</code> pointer so that you can keep track or your progress in reading or writing to the file, in this lab, <code class="language-plaintext highlighter-rouge">client_connect()</code> returns a file descriptor (with the data type of int) that lets your program keep track of which port your computer will use to talk to the remote computer.</p>

<h3 id="sending-data">Sending Data</h3>
<p>Just like in the I/O lab, you will notice that much of what you will be doing in this lab is using write functions to the socket file descriptor. Instead of using <code class="language-plaintext highlighter-rouge">fwrite()</code> you will be using a function (see the link in <strong>Explore More</strong>) called <code class="language-plaintext highlighter-rouge">send()</code>. Look at the tutorial below to see how the function behaves and you will notice it is very close to writing to a file. However, be careful. Since this is network programming, there is no guarantee that when you call <code class="language-plaintext highlighter-rouge">send()</code> that it will send all the data in the buffer you tried to send. You will be responsible for writing the logic to ensure that <strong>all</strong> of the data is sent correctly.</p>

<h3 id="freeing-memory">Freeing Memory</h3>
<p>Just like in any other file, directory, or memory operation that allocates a pointer or memory off of the stack, you will need to free that memory. If this is not done, unexpected behavior may occur on your system. So remember the following:</p>

<table>
  <thead>
    <tr>
      <th>Memory Allocation</th>
      <th>Freeing Call</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">malloc</code></td>
      <td><code class="language-plaintext highlighter-rouge">free</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">fopen</code></td>
      <td><code class="language-plaintext highlighter-rouge">fclose</code></td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">opendir</code></td>
      <td><code class="language-plaintext highlighter-rouge">closedir</code></td>
    </tr>
    <tr>
      <td>
<code class="language-plaintext highlighter-rouge">socket</code> (donâ€™t worry about calling this function in this lab, this is done for you already in the provided <code class="language-plaintext highlighter-rouge">client_connect</code> function)</td>
      <td><code class="language-plaintext highlighter-rouge">close</code></td>
    </tr>
  </tbody>
</table>

<h2 id="requirements">Requirements</h2>

<p>In this lab you should accomplish the following:</p>
<ul>
  <li>Copy your code from the previous lab into the cloned repository for this lab on your Pi Z2W.</li>
  <li>Assign the left button (or the up button in code) to send the selected image to the server at netlab.et.byu.edu:2225
    <ul>
      <li>Load the Config struct with the appropriate address data</li>
      <li>Start the client connection</li>
      <li>Load the appropriate image data into the struct</li>
      <li>Implement the sending function</li>
      <li>Close the connection</li>
    </ul>
  </li>
</ul>

<h2 id="submission">Submission</h2>

<h3 id="compilation">Compilation</h3>
<p>Since a large portion of this labâ€™s grade depends on me successfully compiling your code, the following points must be adhered to to ensure consistency in the grading process. Any deviation in this will result in points off your grade:</p>

<ul>
  <li>The code in this lab will be compiled at the root of this lab repository (i.e. <code class="language-plaintext highlighter-rouge">client-&lt;your-github-username&gt;</code>). It is your responsibility to ensure that <code class="language-plaintext highlighter-rouge">gcc</code> will work from this directory.</li>
  <li>Your binary must output to a folder called <code class="language-plaintext highlighter-rouge">bin</code>. This folder will be marked to be ignored by <code class="language-plaintext highlighter-rouge">git</code>, meaning that I will not receive your final compiled binary to test, but rather your code which must compile successfully on my Pi Z2W.</li>
</ul>

<h3 id="gitignore">Gitignore</h3>
<p>In this lab you are expected to ignore the following:</p>

<ul>
  <li>
<code class="language-plaintext highlighter-rouge">.vscode</code> folders</li>
  <li>the <code class="language-plaintext highlighter-rouge">bin</code> folder where your binary is generated</li>
</ul>

<h3 id="normal-stuff">Normal Stuff</h3>
<ul>
  <li>
    <p>Complete all of the requirements.</p>
  </li>
  <li>
    <p>Answer the questions in the <code class="language-plaintext highlighter-rouge">README.md</code>.</p>
  </li>
  <li>
    <p>To successfully submit your lab, you will need to follow the instructions in the <a href="/ecen224/lab-setup">Lab Setup</a> page, especially the <strong>Commiting and Pushing Files</strong> and <strong>Tagging Submissions</strong> section.</p>
  </li>
  <li>
    <p><strong>MAKE SURE YOUR CODE FOLLOWS THE CODING STANDARD!</strong> More info on how to set that up is available on the Coding Standard page.</p>
  </li>
</ul>

<h2 id="explore-more">Explore More!</h2>
<ul>
  <li><a href="https://www.tutorialspoint.com/c_standard_library/c_function_memcpy.htm" target="_blank" rel="noopener noreferrer"><code class="language-plaintext highlighter-rouge">memcpy()</code> in C</a></li>
  <li><a href="https://man7.org/linux/man-pages/man2/send.2.html" target="_blank" rel="noopener noreferrer"><code class="language-plaintext highlighter-rouge">send()</code> in C</a></li>
  <li><a href="https://beej.us/guide/bgnet/html/" target="_blank" rel="noopener noreferrer">Ultimate Guide to Network Programming in C</a></li>
</ul>

    </div>
</article>
      </div>
    </div>
    <!-- /#page-content-wrapper -->

  </div>
  <!-- /#wrapper -->

  <!-- Bootstrap core JavaScript -->
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="/ecen224/js/jquery.visible.min.js"></script>

<!-- Menu Toggle Script -->
<script>
    $("#menu-toggle").click(function (e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });

    var prevVisible = $('#page-title').visible();

    $(window).scroll(function () {
        currentVisible = $('#page-title').visible()
        if (prevVisible && !currentVisible) {
            console.log("Do something!");
            $("#page-title-bar").html($('#page-title').text());
        }

        if (!prevVisible && currentVisible) {
            $("#page-title-bar").html("")
        }

        prevVisible = currentVisible;
    });

</script>

</body>

</html>